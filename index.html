<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Fire Blanket Quiz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
            overflow: hidden;
            height: 100vh;
            position: relative;
        }

        .container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            max-width: 850px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
        }

        .screen.active {
            opacity: 1;
            transform: translateX(0);
        }

        .screen.prev {
            transform: translateX(-100%);
        }

        .loading-screen {
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(135deg, #d70000 0%, #b71c1c 100%);
            color: white;
            padding: 40px;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .loading-subhead {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 2rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .footer-microcopy {
            font-size: 0.9rem;
            opacity: 0.7;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .header-container {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 35px 20px 20px;
        }

        .back-btn {
            cursor: pointer;
            stroke: #666;
            transition: stroke 0.3s;
        }

        .back-btn:hover {
            stroke: #d70000;
        }

        .progress-container {
            display: flex;
            width: 100%;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            gap: 5px;
        }

        .progress-subcontainer {
            flex: 1;
            background-color: #ddd;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }

        .progress-bar-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 0%;
            background-color: #d70000;
            transition: width 0.6s ease;
        }

        .quiz-content {
            padding: 0 40px 40px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .quiz-title {
            text-align: center;
            margin-bottom: 25px;
        }

        .quiz-title p {
            font-size: 42px;
            font-weight: bold;
            line-height: 1.4;
            color: #d70000;
        }

        .start-screen {
            background: white;
        }

        .start-headline {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            line-height: 1.1;
            text-align: center;
            color: #333;
        }

        .start-body {
            font-size: 1.1rem;
            line-height: 1.5;
            margin-bottom: 2.5rem;
            text-align: center;
            color: #666;
        }

        .quiz-image {
            text-align: center;
            margin: 35px 0;
        }

        .quiz-image img {
            max-width: 100%;
            width: 300px;
            height: 300px;
            border-radius: 15px;
            object-fit: cover;
        }

        .question {
            font-size: 28px;
            font-weight: bold;
            line-height: 1.4;
            margin-bottom: 20px;
            text-align: center;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .option {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #f7f7f7;
            padding: 16px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            font-size: 18px;
            line-height: 1.4;
        }

        .option:hover {
            background: #fdf2f2;
            border-color: #d70000;
        }

        .option.selected {
            background: #fdf2f2;
            border-color: #d70000;
            font-weight: bold;
        }

        .option input[type="radio"] {
            appearance: none;
            -webkit-appearance: none;
            background-color: #fff;
            border: 2px solid #d70000;
            width: 1.25rem;
            height: 1.25rem;
            border-radius: 50%;
            position: relative;
            cursor: pointer;
            transition: border 0.2s ease-in-out;
            flex-shrink: 0;
        }

        .option input[type="radio"]:checked::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 10px;
            height: 10px;
            background-color: #d70000;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .cta-primary {
            background: #d70000;
            border: none;
            color: white;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 26px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 45px auto;
            display: block;
            border-bottom: 4px solid #950909;
            line-height: 1.4;
        }

        .cta-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(215, 0, 0, 0.4);
        }

        .cta-primary:active {
            transform: translateY(0);
        }

        .cta-secondary {
            background: none;
            border: none;
            color: #666;
            font-size: 1rem;
            cursor: pointer;
            text-decoration: underline;
            transition: color 0.3s;
            display: block;
            text-align: center;
            margin-bottom: 20px;
        }

        .cta-secondary:hover {
            color: #d70000;
        }

        .helper-text {
            font-size: 0.9rem;
            color: #666;
            background: #f0f0f0;
            padding: 12px;
            border-radius: 8px;
            margin-top: 1rem;
            text-align: center;
        }

        .end-card {
            background: white;
            padding: 30px 40px;
            text-align: center;
            justify-content: space-between;
            overflow-y: auto;
        }

        .badge {
            background: #d70000;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 1.5rem;
        }

        .end-headline {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 1rem;
            line-height: 1.1;
            color: #333;
        }

        .end-subhead {
            font-size: 1.1rem;
            margin-bottom: 2rem;
            color: #666;
            line-height: 1.4;
        }

        .benefits {
            list-style: none;
            margin-bottom: 2rem;
            text-align: left;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .benefits li {
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            font-size: 1rem;
            display: flex;
            align-items: center;
            line-height: 1.4;
        }

        .benefits li:before {
            content: "âœ“";
            color: #d70000;
            font-weight: bold;
            margin-right: 12px;
            font-size: 1.2rem;
        }

        .urgency {
            font-size: 0.9rem;
            color: #d70000;
            margin: 1rem 0;
            font-weight: 600;
        }

        .trust-strip {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 1rem 0;
            font-size: 0.9rem;
            color: #666;
        }

        .legal-footer {
            font-size: 0.7rem;
            color: #999;
            line-height: 1.3;
            margin-top: 2rem;
        }

        .image-placeholder {
            background: #f0f0f0;
            border-radius: 12px;
            padding: 20px;
            margin: 1rem 0;
            text-align: center;
            font-size: 0.8rem;
            color: #999;
            border: 1px dashed #ddd;
        }

        /* Theme variations for different risk levels */
        .excellent-theme {
            background: linear-gradient(135deg, #1b5e20 0%, #2e7d32 100%);
            color: white;
        }

        .excellent-theme .badge {
            background: rgba(76, 175, 80, 0.3);
            color: #a5d6a7;
        }

        .excellent-theme .end-headline,
        .excellent-theme .end-subhead {
            color: white;
        }

        .excellent-theme .benefits li:before {
            color: #4caf50;
        }

        .prepared-theme {
            background: linear-gradient(135deg, #0d47a1 0%, #1976d2 100%);
            color: white;
        }

        .prepared-theme .badge {
            background: rgba(33, 150, 243, 0.3);
            color: #90caf9;
        }

        .prepared-theme .end-headline,
        .prepared-theme .end-subhead {
            color: white;
        }

        .prepared-theme .benefits li:before {
            color: #2196f3;
        }

        .needs-prep-theme {
            background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%);
            color: white;
        }

        .needs-prep-theme .badge {
            background: rgba(255, 193, 7, 0.3);
            color: #fff176;
        }

        .needs-prep-theme .end-headline,
        .needs-prep-theme .end-subhead {
            color: white;
        }

        .needs-prep-theme .urgency {
            color: #ffeb3b;
        }

        .high-risk-theme {
            background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);
            color: white;
        }

        .high-risk-theme .badge {
            background: rgba(244, 67, 54, 0.3);
            color: #ffcdd2;
        }

        .high-risk-theme .end-headline,
        .high-risk-theme .end-subhead {
            color: white;
        }

        .high-risk-theme .urgency {
            color: #ffeb3b;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @media (max-width: 768px) {
            .quiz-content {
                padding: 0 20px 40px;
            }
            .header-container {
                padding: 16px 10px 20px;
            }
            .question {
                font-size: 22px;
            }
            .quiz-title p {
                font-size: 22px;
            }
            .start-headline {
                font-size: 1.8rem;
            }
            .end-headline {
                font-size: 1.7rem;
            }
            .cta-primary {
                font-size: 20px;
                padding: 10px 40px;
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Loading Screen -->
        <div class="screen loading-screen active" id="screen-loading">
            <div class="logo">Prepared Hero</div>
            <div class="loading-subhead">Fire starts fast. Be faster.</div>
            <div class="spinner"></div>
            <div class="footer-microcopy" onclick="startQuiz()">Takes ~30 seconds. Tap to begin.</div>
        </div>

        <!-- Start Screen -->
        <div class="screen start-screen" id="screen-start">
            <div class="quiz-content">
                <div class="quiz-title">
                    <p>FIRE RISK ASSESSMENT QUIZ</p>
                </div>
                <div class="quiz-image">
                    <div class="image-placeholder">[IMG: quiz_intro_kitchen_hero_1080x1080]</div>
                </div>
                <div class="start-headline">Could you stop a small fire in 3 seconds?</div>
                <div class="start-body">Take a quick quiz and you could unlock an <strong>Exclusive Offer made just for you</strong>.</div>
                <button class="cta-primary" onclick="startQuiz()">Start the Quiz</button>
                <button class="cta-secondary" onclick="skipToOffer()">Skip to Offer</button>
                <div class="legal-footer">For small, manageable fires. Always call emergency services.</div>
            </div>
        </div>

        <!-- Question 1 -->
        <div class="screen" id="screen-q1">
            <div class="header-container">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="back-btn" onclick="goBack()">
                    <path d="M10 6L4 12L10 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4 12H20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="progress-container">
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" id="progress-1" style="width: 10%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" id="progress-2"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" id="progress-3"></div>
                    </div>
                </div>
            </div>
            <div class="quiz-content">
                <div class="quiz-image">
                    <div class="image-placeholder">[IMG: under_sink_extinguisher_1080x720]</div>
                </div>
                <div class="question">Do you have a fire extinguisher in your home?</div>
                <div class="options">
                    <label class="option" onclick="selectAnswer(this, 2, 'q2')">
                        <input type="radio" name="q1">
                        <span>Yes</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 0, 'q6')">
                        <input type="radio" name="q1">
                        <span>No</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 0, 'q2')">
                        <input type="radio" name="q1">
                        <span>Not sure</span>
                    </label>
                </div>
                <div class="helper-text">This checkup adapts to your answers.</div>
            </div>
        </div>

        <!-- Question 2 -->
        <div class="screen" id="screen-q2">
            <div class="header-container">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="back-btn" onclick="goBack()">
                    <path d="M10 6L4 12L10 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4 12H20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="progress-container">
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" id="progress-2" style="width: 20%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" id="progress-3"></div>
                    </div>
                </div>
            </div>
            <div class="quiz-content">
                <div class="quiz-image">
                    <div class="image-placeholder">[IMG: hallway_storage_callout_1080x720]</div>
                </div>
                <div class="question">Do you know where your extinguisher is <strong>right now</strong>?</div>
                <div class="options">
                    <label class="option" onclick="selectAnswer(this, 2, 'q3')">
                        <input type="radio" name="q2">
                        <span>Yes, exactly</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 1, 'q3')">
                        <input type="radio" name="q2">
                        <span>Sort of</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 0, 'q6')">
                        <input type="radio" name="q2">
                        <span>No idea</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Question 3 -->
        <div class="screen" id="screen-q3">
            <div class="header-container">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="back-btn" onclick="goBack()">
                    <path d="M10 6L4 12L10 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4 12H20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="progress-container">
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 40%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" id="progress-3"></div>
                    </div>
                </div>
            </div>
            <div class="quiz-content">
                <div class="quiz-image">
                    <div class="image-placeholder">[IMG: training_extinguisher_outdoors_1080x720]</div>
                </div>
                <div class="question">Have you ever actually used a fire extinguisher?</div>
                <div class="options">
                    <label class="option" onclick="selectAnswer(this, 2, 'q5')">
                        <input type="radio" name="q3">
                        <span>Yes</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 0, 'q4')">
                        <input type="radio" name="q3">
                        <span>No</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Question 4 -->
        <div class="screen" id="screen-q4">
            <div class="header-container">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="back-btn" onclick="goBack()">
                    <path d="M10 6L4 12L10 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4 12H20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="progress-container">
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 60%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" id="progress-3"></div>
                    </div>
                </div>
            </div>
            <div class="quiz-content">
                <div class="quiz-image">
                    <div class="image-placeholder">[IMG: PASS_infographic_1080x1080]</div>
                </div>
                <div class="question">Do you know the "PASS" steps?</div>
                <div class="options">
                    <label class="option" onclick="selectAnswer(this, 2, 'q5')">
                        <input type="radio" name="q4">
                        <span>Yes</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 0, 'q5')">
                        <input type="radio" name="q4">
                        <span>No</span>
                    </label>
                </div>
                <div class="helper-text"><strong>PASS = Pull, Aim, Squeeze, Sweep.</strong></div>
            </div>
        </div>

        <!-- Question 5 - Only for users who have extinguisher -->
        <div class="screen" id="screen-q5">
            <div class="header-container">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="back-btn" onclick="goBack()">
                    <path d="M10 6L4 12L10 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4 12H20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="progress-container">
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 80%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" id="progress-3"></div>
                    </div>
                </div>
            </div>
            <div class="quiz-content">
                <div class="quiz-image">
                    <div class="image-placeholder">[IMG: gauge_check_closeup_1080x720]</div>
                </div>
                <div class="question">When did you last check if yours still works?</div>
                <div class="options">
                    <label class="option" onclick="selectAnswer(this, 2, 'q6')">
                        <input type="radio" name="q5">
                        <span>Within 6 months</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 1, 'q6')">
                        <input type="radio" name="q5">
                        <span>Within a year</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 0, 'q6')">
                        <input type="radio" name="q5">
                        <span>Over a year ago</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 0, 'q6')">
                        <input type="radio" name="q5">
                        <span>Never checked</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Question 6 -->
        <div class="screen" id="screen-q6">
            <div class="header-container">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="back-btn" onclick="goBack()">
                    <path d="M10 6L4 12L10 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4 12H20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="progress-container">
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 20%;"></div>
                    </div>
                </div>
            </div>
            <div class="quiz-content">
                <div class="quiz-image">
                    <div class="image-placeholder">[IMG: tool_within_reach_hook_1080x720]</div>
                </div>
                <div class="question">Do you have <strong>any</strong> fire-suppression tool you can grab in <strong>3 seconds</strong>?</div>
                <div class="options">
                    <label class="option" onclick="selectAnswer(this, 2, 'q7')">
                        <input type="radio" name="q6">
                        <span>Yes</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 0, 'q7')">
                        <input type="radio" name="q6">
                        <span>No</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 0, 'q7')">
                        <input type="radio" name="q6">
                        <span>Just water</span>
                    </label>
                </div>
                <div class="helper-text">Water can <strong>spread grease and electrical fires</strong>â€”not safe.</div>
            </div>
        </div>

        <!-- Question 7 -->
        <div class="screen" id="screen-q7">
            <div class="header-container">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="back-btn" onclick="goBack()">
                    <path d="M10 6L4 12L10 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4 12H20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="progress-container">
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 40%;"></div>
                    </div>
                </div>
            </div>
            <div class="quiz-content">
                <div class="quiz-image">
                    <div class="image-placeholder">[IMG: pan_fire_smother_diagram_1080x720]</div>
                </div>
                <div class="question">Could you safely put out a <strong>grease fire</strong> right now?</div>
                <div class="options">
                    <label class="option" onclick="selectAnswer(this, 2, 'q8')">
                        <input type="radio" name="q7">
                        <span>Yes, I know how</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 0, 'q8')">
                        <input type="radio" name="q7">
                        <span>I'd use water</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 0, 'q8')">
                        <input type="radio" name="q7">
                        <span>Not sure</span>
                    </label>
                </div>
                <div class="helper-text">Smother the flamesâ€”<strong>don't</strong> use water.</div>
            </div>
        </div>

        <!-- Question 8 -->
        <div class="screen" id="screen-q8">
            <div class="header-container">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="back-btn" onclick="goBack()">
                    <path d="M10 6L4 12L10 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4 12H20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="progress-container">
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 60%;"></div>
                    </div>
                </div>
            </div>
            <div class="quiz-content">
                <div class="quiz-image">
                    <div class="image-placeholder">[IMG: light_smoke_kitchen_1080x720]</div>
                </div>
                <div class="question">Have you ever had a <strong>kitchen fire</strong>?</div>
                <div class="options">
                    <label class="option" onclick="selectAnswer(this, 1, 'q9')">
                        <input type="radio" name="q8">
                        <span>Yes</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 2, 'q10')">
                        <input type="radio" name="q8">
                        <span>No</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Question 9 -->
        <div class="screen" id="screen-q9">
            <div class="header-container">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="back-btn" onclick="goBack()">
                    <path d="M10 6L4 12L10 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4 12H20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="progress-container">
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 80%;"></div>
                    </div>
                </div>
            </div>
            <div class="quiz-content">
                <div class="quiz-image">
                    <div class="image-placeholder">[IMG: lid_cover_pan_1080x720]</div>
                </div>
                <div class="question">How did you handle it?</div>
                <div class="options">
                    <label class="option" onclick="selectAnswer(this, 2, 'q10')">
                        <input type="radio" name="q9">
                        <span>Smothered/used extinguisher/turned off heat</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 0, 'q10')">
                        <input type="radio" name="q9">
                        <span>Used water on grease fire</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 1, 'q10')">
                        <input type="radio" name="q9">
                        <span>Panicked / called for help only</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Question 10 -->
        <div class="screen" id="screen-q10">
            <div class="header-container">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="back-btn" onclick="goBack()">
                    <path d="M10 6L4 12L10 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4 12H20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="progress-container">
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                    <div class="progress-subcontainer">
                        <div class="progress-bar-fill" style="width: 100%;"></div>
                    </div>
                </div>
            </div>
            <div class="quiz-content">
                <div class="quiz-image">
                    <div class="image-placeholder">[IMG: family_drill_floorplan_1080x720]</div>
                </div>
                <div class="question">Have you and your household practiced what to do in case of a fire?</div>
                <div class="options">
                    <label class="option" onclick="selectAnswer(this, 2, 'results')">
                        <input type="radio" name="q10">
                        <span>Yes, within the past year</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 1, 'results')">
                        <input type="radio" name="q10">
                        <span>Yes, but over a year ago</span>
                    </label>
                    <label class="option" onclick="selectAnswer(this, 0, 'results')">
                        <input type="radio" name="q10">
                        <span>Never practiced</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- End Card A - Excellent (16-20) -->
        <div class="screen end-card excellent-theme" id="screen-end-a">
            <div class="quiz-content">
                <div class="badge">Excellent!</div>
                <div class="end-headline">You're a Fire Safety Expert</div>
                <div class="end-subhead">Your preparation is outstanding. As a thank-you for your proactive approach, unlock an <strong>exclusive dealâ€”up to 56% off</strong> the Emergency Fire Blanket to complete your setup.</div>
                
                <ul class="benefits">
                    <li><strong>Smothers flames in seconds</strong>â€”no mess, no re-flash</li>
                    <li><strong>Grease & electrical safe</strong>â€”where water fails</li>
                    <li><strong>Expert-approved</strong>â€”firefighter recommended</li>
                </ul>

                <button class="cta-primary" onclick="openStore()">Claim up to 56% off</button>
                <button class="cta-secondary" onclick="showDemo()">See expert deployment tips</button>
                
                <div class="urgency">Limited-time inventory pricing. While supplies last.</div>
                <div class="trust-strip">â˜…â˜…â˜…â˜…â˜… <strong>10,000+</strong> households protected</div>
                
                <div class="image-placeholder">[IMG: bundle_hero_counter_1080x1080]</div>
                
                <div class="legal-footer">For small household fires only. Always call emergency services for unsafe situations. Terms apply.</div>
            </div>
        </div>

        <!-- End Card B - Prepared (12-15) -->
        <div class="screen end-card prepared-theme" id="screen-end-b">
            <div class="quiz-content">
                <div class="badge">Well Prepared</div>
                <div class="end-headline">You're Ready for the Unexpected</div>
                <div class="end-subhead">You've built solid fire readinessâ€”keep it sharp with pro tips and fast-access tools. <strong>Exclusive offerâ€”up to 56% off</strong> the Emergency Fire Blanket.</div>
                
                <ul class="benefits">
                    <li><strong>Smother small fires in seconds</strong>â€”avoid re-flash</li>
                    <li><strong>Kitchen-safe for grease incidents</strong>â€”water isn't</li>
                    <li><strong>Family-simple</strong>â€”no training required</li>
                </ul>

                <button class="cta-primary" onclick="openStore()">Unlock up to 56% off</button>
                <button class="cta-secondary" onclick="showDemo()">See how the EFB works</button>
                
                <div class="urgency">Exclusive pricing for quiz participants.</div>
                <div class="trust-strip">Risk-free guarantee â€¢ Fast shipping â€¢ Secure checkout</div>
                
                <div class="image-placeholder">[IMG: efb_bundle_hero_on_kitchen_counter 1080x1080]</div>
                
                <div class="legal-footer">For small household fires only. Always call emergency services for unsafe situations. Terms apply.</div>
            </div>
        </div>

        <!-- End Card C - Not Prepared (8-11) -->
        <div class="screen end-card needs-prep-theme" id="screen-end-c">
            <div class="quiz-content">
                <div class="badge">Room to Improve</div>
                <div class="end-headline">There's Room to Improve</div>
                <div class="end-subhead">A few quick fixes can make the difference between a scare and an emergency. Get the Emergency Fire Blanket for <strong>up to 56% off</strong> and be ready to smother small fires fast.</div>
                
                <ul class="benefits">
                    <li><strong>Smother flames fast</strong>â€”no residue, no mess</li>
                    <li><strong>Ideal for grease fires</strong>â€”where water fails</li>
                    <li><strong>Store within arm's reach</strong>â€”3-second access</li>
                </ul>

                <button class="cta-primary" onclick="openStore()">Get up to 56% off now</button>
                <button class="cta-secondary" onclick="showWhy()">Why smothering beats spraying</button>
                
                <div class="urgency">Exclusive pricing reserved for this session.</div>
                <div class="trust-strip">Risk-free guarantee â€¢ Free returns â€¢ Secure checkout</div>
                
                <div class="image-placeholder">[IMG: pull_pouch_closeup_1080x1080]</div>
                
                <div class="legal-footer">Use only on small, manageable fires. Always call emergency services. Terms apply.</div>
            </div>
        </div>

        <!-- End Card D - High Risk (0-7) -->
        <div class="screen end-card high-risk-theme" id="screen-end-d">
            <div class="quiz-content">
                <div class="badge">High Risk</div>
                <div class="end-headline">Your Home Is in Danger if a Fire Starts</div>
                <div class="end-subhead">Right now, your readiness has critical gaps. Let's fix them in the next 60 seconds. <strong>Every day you wait increases your risk.</strong></div>
                
                <ul class="benefits">
                    <li><strong>Stop small fires before they spread</strong></li>
                    <li><strong>Safer for grease and electrical incidents</strong></li>
                    <li><strong>Simple enough for the whole family</strong></li>
                </ul>

                <button class="cta-primary" onclick="openStore()">Secure up to 56% offâ€”make your home safer today</button>
                <button class="cta-secondary" onclick="showUrgent()">Learn the 3-second rule</button>
                
                <div class="urgency">ðŸš¨ URGENT: Exclusive pricing reserved for this session.</div>
                <div class="trust-strip">Firefighter-backed â€¢ Thousands protected â€¢ Act now</div>
                
                <div class="image-placeholder">[IMG: urgent_banner_hero_1080x1080]</div>
                
                <div class="legal-footer">Always call emergency services for unsafe situations. Terms apply.</div>
            </div>
        </div>
    </div>

    <script>
        let currentScreen = 'loading';
        let score = 0;
        let hasExtinguisher = null;
        let hadKitchenFire = null;
        let screenHistory = ['loading'];

        function showScreen(screenId) {
            // Hide current screen
            const current = document.querySelector('.screen.active');
            if (current) {
                current.classList.remove('active');
                current.classList.add('prev');
            }

            // Show new screen
            setTimeout(() => {
                if (current) current.classList.remove('prev');
                const newScreen = document.getElementById(`screen-${screenId}`);
                if (newScreen) {
                    newScreen.classList.add('active', 'fade-in');
                    setTimeout(() => newScreen.classList.remove('fade-in'), 600);
                }
            }, 200);

            currentScreen = screenId;
            screenHistory.push(screenId);
        }

        function goBack() {
            if (screenHistory.length > 2) {
                screenHistory.pop(); // Remove current
                const previousScreen = screenHistory[screenHistory.length - 1];
                showScreen(previousScreen.replace('screen-', ''));
            }
        }

        function startQuiz() {
            if (currentScreen === 'loading') {
                showScreen('start');
            } else {
                showScreen('q1');
            }
        }

        function selectAnswer(optionElement, points, nextScreen) {
            // Visual feedback
            const allOptions = optionElement.parentElement.querySelectorAll('.option');
            allOptions.forEach(opt => opt.classList.remove('selected'));
            optionElement.classList.add('selected');
            
            // Check the radio
            const radio = optionElement.querySelector('input[type="radio"]');
            radio.checked = true;

            score += points;
            
            // Track important branching decisions
            if (currentScreen === 'q1') {
                hasExtinguisher = optionElement.querySelector('span').textContent === 'Yes';
            }
            
            if (currentScreen === 'q8') {
                hadKitchenFire = optionElement.querySelector('span').textContent === 'Yes';
            }

            // Handle results
            if (nextScreen === 'results') {
                setTimeout(() => calculateResults(), 300);
                return;
            }

            // Skip Q5 (maintenance) if user doesn't have extinguisher
            if (nextScreen === 'q6' && currentScreen === 'q4' && !hasExtinguisher) {
                // This shouldn't happen with our logic, but safety check
            }

            setTimeout(() => showScreen(nextScreen), 300);
        }

        function calculateResults() {
            // Show brief analyzing overlay
            const analyzing = document.createElement('div');
            analyzing.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
                font-size: 1.2rem;
                font-weight: 600;
                color: white;
            `;
            analyzing.textContent = 'Analyzing your results...';
            document.body.appendChild(analyzing);

            setTimeout(() => {
                document.body.removeChild(analyzing);
                
                // Updated 4-tier scoring
                if (score >= 16) {
                    showScreen('end-a'); // Excellent
                } else if (score >= 12) {
                    showScreen('end-b'); // Prepared 
                } else if (score >= 8) {
                    showScreen('end-c'); // Not Prepared
                } else {
                    showScreen('end-d'); // High Risk
                }
            }, 800);
        }

        function skipToOffer() {
            // Send them to high-risk end card since they're skipping the assessment
            score = 0;
            showScreen('end-d');
        }

        function openStore() {
            // AppLovin/MRAID compliant store open
            if (typeof mraid !== 'undefined' && mraid.open) {
                mraid.open('https://order.preparedhero.com/quiz-efb-sp?utm_source=applovin&utm_campaign=efb_quiz');
            } else if (window.parent && window.parent !== window) {
                // Fallback for iframe context
                window.parent.postMessage({
                    type: 'open_store',
                    url: 'https://order.preparedhero.com/quiz-efb-sp?utm_source=applovin&utm_campaign=efb_quiz'
                }, '*');
            } else {
                // Fallback for testing
                window.open('https://order.preparedhero.com/quiz-efb-sp?utm_source=applovin&utm_campaign=efb_quiz', '_blank');
            }
        }

        function showDemo() {
            // Secondary CTA 
            if (typeof mraid !== 'undefined' && mraid.open) {
                mraid.open('https://preparedhero.com/how-efb-works?utm_source=applovin');
            } else {
                window.open('https://preparedhero.com/how-efb-works?utm_source=applovin', '_blank');
            }
        }

        function showWhy() {
            // Secondary CTA for not prepared users
            if (typeof mraid !== 'undefined' && mraid.open) {
                mraid.open('https://preparedhero.com/blanket-vs-extinguisher?utm_source=applovin');
            } else {
                window.open('https://preparedhero.com/blanket-vs-extinguisher?utm_source=applovin', '_blank');
            }
        }

        function showUrgent() {
            // Secondary CTA for high-risk users
            if (typeof mraid !== 'undefined' && mraid.open) {
                mraid.open('https://preparedhero.com/3-second-fire-rule?utm_source=applovin');
            } else {
                window.open('https://preparedhero.com/3-second-fire-rule?utm_source=applovin', '_blank');
            }
        }

        // Auto-start loading sequence
        setTimeout(() => {
            if (currentScreen === 'loading') {
                showScreen('start');
            }
        }, 2500);

        // MRAID initialization for AppLovin
        if (typeof mraid !== 'undefined') {
            if (mraid.getState() === 'loading') {
                mraid.addEventListener('ready', function() {
                    console.log('MRAID Ready');
                });
            }
        }

        // Prevent scrolling and handle touch events
        document.addEventListener('touchmove', function(e) {
            if (e.target.closest('.screen.active .quiz-content')) {
                // Allow scrolling within quiz content
                return;
            }
            e.preventDefault();
        }, { passive: false });

        // Add haptic feedback for iOS (if available)
        function addHaptic() {
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }
        }

        // Add haptic to all button clicks
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'BUTTON' || e.target.classList.contains('option')) {
                addHaptic();
            }
        });

        // Track engagement for AppLovin
        function trackEvent(eventName, data = {}) {
            if (window.parent && window.parent !== window) {
                window.parent.postMessage({
                    type: 'track_event',
                    event: eventName,
                    data: data
                }, '*');
            }
        }

        // Track quiz milestones
        function trackQuizStart() {
            trackEvent('quiz_started');
        }

        function trackQuizComplete(finalScore) {
            let category = 'high_risk';
            if (finalScore >= 16) category = 'excellent';
            else if (finalScore >= 12) category = 'prepared';
            else if (finalScore >= 8) category = 'not_prepared';
            
            trackEvent('quiz_completed', { 
                score: finalScore,
                category: category
            });
        }

        // Update selectAnswer to include tracking
        const originalSelectAnswer = selectAnswer;
        selectAnswer = function(optionElement, points, nextScreen) {
            if (nextScreen === 'results') {
                trackQuizComplete(score + points);
            }
            return originalSelectAnswer(optionElement, points, nextScreen);
        };
    </script>
</body>
</html>
